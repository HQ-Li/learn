<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>22-Liskovæ›¿æ¢åŸåˆ™ï¼šç”¨äº†ç»§æ‰¿ï¼Œå­ç±»å°±è®¾è®¡å¯¹äº†å—ï¼Ÿ</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        <style>
        html {
            color: #333;
            -webkit-text-size-adjust: 100%;
            -ms-text-size-adjust: 100%;
            text-rendering: optimizelegibility;
            font-family: Helvetica Neue, PingFang SC, Verdana, Microsoft Yahei, Hiragino Sans GB, Microsoft Sans Serif, WenQuanYi Micro Hei, sans-serif
        }

        html.borderbox *,
        html.borderbox :after,
        html.borderbox :before {
            box-sizing: border-box
        }

        article,
        aside,
        blockquote,
        body,
        button,
        code,
        dd,
        details,
        dl,
        dt,
        fieldset,
        figcaption,
        figure,
        footer,
        form,
        h1,
        h2,
        h3,
        h4,
        h5,
        h6,
        header,
        hr,
        input,
        legend,
        li,
        menu,
        nav,
        ol,
        p,
        pre,
        section,
        td,
        textarea,
        th,
        ul {
            margin: 0;
            padding: 0
        }

        article,
        aside,
        details,
        figcaption,
        figure,
        footer,
        header,
        menu,
        nav,
        section {
            display: block
        }

        audio,
        canvas,
        video {
            display: inline-block
        }

        body,
        button,
        input,
        select,
        textarea {
            font: 300 1em/1.8 PingFang SC, Lantinghei SC, Microsoft Yahei, Hiragino Sans GB, Microsoft Sans Serif, WenQuanYi Micro Hei, Helvetica, sans-serif
        }

        button::-moz-focus-inner,
        input::-moz-focus-inner {
            padding: 0;
            border: 0
        }

        table {
            border-collapse: collapse;
            border-spacing: 0
        }

        fieldset,
        img {
            border: 0
        }

        blockquote {
            position: relative;
            color: #999;
            font-weight: 400;
            border-left: 1px solid #1abc9c;
            padding-left: 1em;
            margin: 1em 3em 1em 2em
        }

        @media only screen and (max-width: 640px) {
            blockquote {
                margin: 1em 0
            }
        }

        abbr,
        acronym {
            border-bottom: 1px dotted;
            font-variant: normal
        }

        abbr {
            cursor: help
        }

        del {
            text-decoration: line-through
        }

        address,
        caption,
        cite,
        code,
        dfn,
        em,
        th,
        var {
            font-style: normal;
            font-weight: 400
        }

        ol,
        ul {
            list-style: none
        }

        caption,
        th {
            text-align: left
        }

        q:after,
        q:before {
            content: ""
        }

        sub,
        sup {
            font-size: 75%;
            line-height: 0;
            position: relative
        }

        :root sub,
        :root sup {
            vertical-align: baseline
        }

        sup {
            top: -.5em
        }

        sub {
            bottom: -.25em
        }

        a {
            color: #1abc9c
        }

        a:hover {
            text-decoration: underline
        }

        .typo a {
            border-bottom: 1px solid #1abc9c
        }

        .typo a:hover {
            border-bottom-color: #555;
            color: #555
        }

        .typo a:hover,
        a,
        ins {
            text-decoration: none
        }

        .typo-u,
        u {
            text-decoration: underline
        }

        mark {
            background: #fffdd1;
            border-bottom: 1px solid #ffedce;
            padding: 2px;
            margin: 0 5px
        }

        code,
        pre,
        pre tt {
            font-family: Courier, Courier New, monospace
        }

        pre {
            background: hsla(0, 0%, 97%, .7);
            border: 1px solid #ddd;
            padding: 1em 1.5em;
            display: block;
            -webkit-overflow-scrolling: touch
        }

        hr {
            border: none;
            border-bottom: 1px solid #cfcfcf;
            margin-bottom: .8em;
            height: 10px
        }

        .typo-small,
        figcaption,
        small {
            font-size: .9em;
            color: #888
        }

        b,
        strong {
            font-weight: 700;
            color: #000
        }

        [draggable] {
            cursor: move
        }

        .clearfix:after,
        .clearfix:before {
            content: "";
            display: table
        }

        .clearfix:after {
            clear: both
        }

        .clearfix {
            zoom: 1
        }

        .textwrap,
        .textwrap td,
        .textwrap th {
            word-wrap: break-word;
            word-break: break-all
        }

        .textwrap-table {
            table-layout: fixed
        }

        .serif {
            font-family: Palatino, Optima, Georgia, serif
        }

        .typo-dl,
        .typo-form,
        .typo-hr,
        .typo-ol,
        .typo-p,
        .typo-pre,
        .typo-table,
        .typo-ul,
        .typo dl,
        .typo form,
        .typo hr,
        .typo ol,
        .typo p,
        .typo pre,
        .typo table,
        .typo ul,
        blockquote {
            margin-bottom: 1rem
        }

        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            font-family: PingFang SC, Helvetica Neue, Verdana, Microsoft Yahei, Hiragino Sans GB, Microsoft Sans Serif, WenQuanYi Micro Hei, sans-serif;
            color: #000;
            line-height: 1.35
        }

        .typo-h1,
        .typo-h2,
        .typo-h3,
        .typo-h4,
        .typo-h5,
        .typo-h6,
        .typo h1,
        .typo h2,
        .typo h3,
        .typo h4,
        .typo h5,
        .typo h6 {
            margin-top: 1.2em;
            margin-bottom: .6em;
            line-height: 1.35
        }

        .typo-h1,
        .typo h1 {
            font-size: 2em
        }

        .typo-h2,
        .typo h2 {
            font-size: 1.8em
        }

        .typo-h3,
        .typo h3 {
            font-size: 1.6em
        }

        .typo-h4,
        .typo h4 {
            font-size: 1.4em
        }

        .typo-h5,
        .typo-h6,
        .typo h5,
        .typo h6 {
            font-size: 1.2em
        }

        .typo-ul,
        .typo ul {
            margin-left: 1.3em;
            list-style: disc
        }

        .typo-ol,
        .typo ol {
            list-style: decimal;
            margin-left: 1.9em
        }

        .typo-ol ol,
        .typo-ol ul,
        .typo-ul ol,
        .typo-ul ul,
        .typo li ol,
        .typo li ul {
            margin-bottom: .8em;
            margin-left: 2em
        }

        .typo-ol ul,
        .typo-ul ul,
        .typo li ul {
            list-style: circle
        }

        .typo-table td,
        .typo-table th,
        .typo table caption,
        .typo table td,
        .typo table th {
            border: 1px solid #ddd;
            padding: .5em 1em;
            color: #666
        }

        .typo-table th,
        .typo table th {
            background: #fbfbfb
        }

        .typo-table thead th,
        .typo table thead th {
            background: hsla(0, 0%, 95%, .7)
        }

        .typo table caption {
            border-bottom: none
        }

        .typo-input,
        .typo-textarea {
            -webkit-appearance: none;
            border-radius: 0
        }

        .typo-em,
        .typo em,
        caption,
        legend {
            color: #000;
            font-weight: inherit
        }

        .typo-em {
            position: relative
        }

        .typo-em:after {
            position: absolute;
            top: .65em;
            left: 0;
            width: 100%;
            overflow: hidden;
            white-space: nowrap;
            content: "\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB"
        }

        .typo img {
            max-width: 100%
        }

        .common-content {
            font-weight: 400;
            color: #353535;
            line-height: 1.75rem;
            white-space: normal;
            word-break: normal;
            font-size: 1rem
        }

        .common-content img {
            display: block;
            max-width: 100%;
            background-color: #eee
        }

        .common-content audio,
        .common-content video {
            width: 100%;
            background-color: #eee
        }

        .common-content center,
        .common-content font {
            margin-top: 1rem;
            display: inline-block
        }

        .common-content center {
            width: 100%
        }

        .common-content pre {
            margin-top: 1rem;
            padding-left: 0;
            padding-right: 0;
            position: relative;
            overflow: hidden
        }

        .common-content pre code {
            font-size: .8rem;
            font-family: Consolas, Liberation Mono, Menlo, monospace, Courier;
            display: block;
            width: 100%;
            box-sizing: border-box;
            padding-left: 1rem;
            padding-right: 1rem;
            overflow-x: auto
        }

        .common-content hr {
            border: none;
            margin-top: 1.5rem;
            margin-bottom: 1.5rem;
            border-top: 1px solid #f5f5f5;
            height: 1px;
            background: none
        }

        .common-content b,
        .common-content h1,
        .common-content h2,
        .common-content h3,
        .common-content h4,
        .common-content h5,
        .common-content strong {
            font-weight: 700
        }

        .common-content h1,
        .common-content h2 {
            font-size: 1.125rem;
            margin-bottom: .45rem
        }

        .common-content h3,
        .common-content h4,
        .common-content h5 {
            font-size: 1rem;
            margin-bottom: .45rem
        }

        .common-content p {
            font-weight: 400;
            color: #353535;
            margin-top: .15rem
        }

        .common-content .orange {
            color: #ff5a05
        }

        .common-content .reference {
            font-size: 1rem;
            color: #888
        }

        .custom-rich-content h1 {
            margin-top: 0;
            font-weight: 400;
            font-size: 15.25px;
            border-bottom: 1px solid #eee;
            line-height: 2.8
        }

        .custom-rich-content li,
        .custom-rich-content p {
            font-size: 14px;
            color: #888;
            line-height: 1.6
        }

        table.hljs-ln {
            margin-bottom: 0;
            border-spacing: 0;
            border-collapse: collapse
        }

        table.hljs-ln,
        table.hljs-ln tbody,
        table.hljs-ln td,
        table.hljs-ln tr {
            box-sizing: border-box
        }

        table.hljs-ln td {
            padding: 0;
            border: 0
        }

        table.hljs-ln td.hljs-ln-numbers {
            min-width: 15px;
            color: rgba(27, 31, 35, .3);
            text-align: right;
            white-space: nowrap;
            cursor: pointer;
            user-select: none
        }

        table.hljs-ln td.hljs-ln-code,
        table.hljs-ln td.hljs-ln-numbers {
            font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace;
            font-size: 12px;
            line-height: 20px;
            vertical-align: top
        }

        table.hljs-ln td.hljs-ln-code {
            position: relative;
            padding-right: 10px;
            padding-left: 10px;
            overflow: visible;
            color: #24292e;
            word-wrap: normal;
            white-space: pre
        }

        video::-webkit-media-controls {
            overflow: hidden !important
        }

        video::-webkit-media-controls-enclosure {
            width: calc(100% + 32px);
            margin-left: auto
        }

        ._29HP61GA_0 {
            max-width:800px;
            margin:0 auto;
            margin-bottom: 20px;
            font-weight: 400;
            color: #353535;
            line-height: 1.76;
            white-space: normal;
            word-break: normal;
            font-size: 17px;
            -webkit-transition: background-color .3s ease;
            transition: background-color .3s ease
        }

        ._29HP61GA_0 .MathJax_Display {
            overflow: auto
        }

        ._29HP61GA_0 .poster {
            position: fixed;
            left: -10000px;
            top: -10000px;
            overflow: hidden;
            padding: 1rem;
            background: #ececec
        }

        ._29HP61GA_0 .richcontent-pre-copy {
            font-size: 13px;
            color: #888;
            position: absolute;
            right: 1em;
            top: .5em;
            cursor: pointer;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none
        }

        ._29HP61GA_0 .richcontent-pre-copy .iconfont {
            font-size: 12px;
            margin-right: .2em
        }

        ._29HP61GA_0 a {
            color: #fa8919;
            border-bottom: 1px solid #fa8919
        }

        ._29HP61GA_0 img {
            display: block;
            max-width: 100%;
            position: relative;
            left: 50%;
            -webkit-transform: translateX(-50%);
            transform: translateX(-50%);
            background-color: #eee;
            vertical-align: top;
            border-radius: 0
        }

        ._29HP61GA_0 audio,
        ._29HP61GA_0 video {
            width: 100%;
            background-color: #eee
        }

        ._29HP61GA_0 pre {
            margin-top: 16px;
            padding: 34px 0 0;
            margin-bottom: 30px;
            position: relative;
            border-radius: 6px;
            background: rgba(246, 247, 251, .749);
            border: 0
        }

        ._29HP61GA_0 pre code {
            font-size: 12px;
            font-family: Consolas, Liberation Mono, Menlo, monospace, Courier;
            display: block;
            -webkit-box-sizing: border-box;
            box-sizing: border-box;
            margin-left: 16px;
            margin-right: 16px;
            overflow-x: scroll
        }

        ._29HP61GA_0 pre code:after {
            content: "";
            height: 30px;
            width: 100%;
            display: block
        }

        ._29HP61GA_0 hr {
            border: none;
            margin-top: 1.5rem;
            margin-bottom: 1.5rem;
            border-top: 1px solid #f5f5f5;
            height: 1px;
            background: none
        }

        ._29HP61GA_0 h1,
        ._29HP61GA_0 h2,
        ._29HP61GA_0 h3,
        ._29HP61GA_0 h4,
        ._29HP61GA_0 h5 {
            margin-bottom: 20px;
            margin-top: 0;
            font-weight: 700
        }

        ._29HP61GA_0 b,
        ._29HP61GA_0 strong {
            font-weight: 700
        }

        ._29HP61GA_0 h1 {
            font-size: 21px
        }

        ._29HP61GA_0 h2 {
            font-size: 20px
        }

        ._29HP61GA_0 h3 {
            font-size: 19px
        }

        ._29HP61GA_0 h4 {
            font-size: 18px
        }

        ._29HP61GA_0 h5 {
            font-size: 17px
        }

        ._29HP61GA_0 center,
        ._29HP61GA_0 p {
            font-weight: 400;
            color: #353535;
            margin-top: 0;
            margin-bottom: 30px;
            word-break: break-word
        }

        ._29HP61GA_0 center {
            text-align: center
        }

        ._29HP61GA_0 blockquote {
            margin-top: 0;
            margin-bottom: 34px;
            border-left: 3px solid #e8e8e8;
            padding-left: 17px;
            color: #353535
        }

        ._29HP61GA_0 blockquote p {
            margin-top: 0;
            margin-bottom: 0
        }

        ._29HP61GA_0 ol,
        ._29HP61GA_0 ul {
            margin-bottom: 30px
        }

        ._29HP61GA_0 ol p,
        ._29HP61GA_0 ul p {
            margin-top: 0;
            margin-bottom: 0
        }

        ._29HP61GA_0 ol {
            list-style: decimal;
            margin-left: 20px
        }

        ._29HP61GA_0 ul li {
            padding-left: 17px;
            position: relative;
            margin-bottom: 10px
        }

        ._29HP61GA_0 ul li:after {
            content: "";
            height: 6px;
            width: 6px;
            border-radius: 50%;
            background: #353535;
            position: absolute;
            top: 10px;
            left: 0
        }

        ._29HP61GA_0 .orange {
            color: #fa8919
        }

        ._29HP61GA_0 .reference {
            color: #888
        }

        ._29HP61GA_0 .m-right {
            text-align: right
        }

        ._29HP61GA_0 .m-center {
            text-align: center;
            display: block
        }

        ._29HP61GA_0 .m-gray {
            color: #888
        }

        ._29HP61GA_0 .m-small {
            font-size: 15px
        }

        ._29HP61GA_0 table.hljs-ln {
            margin-bottom: 0;
            border-spacing: 0;
            border-collapse: collapse
        }

        ._29HP61GA_0 table.hljs-ln,
        ._29HP61GA_0 table.hljs-ln tbody,
        ._29HP61GA_0 table.hljs-ln td,
        ._29HP61GA_0 table.hljs-ln tr {
            -webkit-box-sizing: border-box;
            box-sizing: border-box
        }

        ._29HP61GA_0 table.hljs-ln td {
            padding: 0;
            border: 0
        }

        ._29HP61GA_0 table.hljs-ln td.hljs-ln-numbers {
            min-width: 15px;
            font-size: 12px;
            color: rgba(27, 31, 35, .3);
            text-align: right;
            white-space: nowrap;
            cursor: pointer;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none
        }

        ._29HP61GA_0 table.hljs-ln td.hljs-ln-code,
        ._29HP61GA_0 table.hljs-ln td.hljs-ln-numbers {
            font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace;
            line-height: 20px;
            vertical-align: top
        }

        ._29HP61GA_0 table.hljs-ln td.hljs-ln-code {
            position: relative;
            padding-right: 10px;
            padding-left: 10px;
            overflow: visible;
            font-size: 13px;
            color: #666;
            word-wrap: normal;
            white-space: pre
        }

    </style>
</head>
<body>
<div class="_29HP61GA_0">
<h1>22-Liskovæ›¿æ¢åŸåˆ™ï¼šç”¨äº†ç»§æ‰¿ï¼Œå­ç±»å°±è®¾è®¡å¯¹äº†å—ï¼Ÿ</h1>
<p>ä½ å¥½ï¼æˆ‘æ˜¯éƒ‘æ™”ã€‚</p><p>ä¸Šä¸€è®²ï¼Œæˆ‘ä»¬è®²äº†å¼€æ”¾å°é—­åŸåˆ™ï¼Œæƒ³è¦è®©ç³»ç»Ÿç¬¦åˆå¼€æ”¾å°é—­åŸåˆ™ï¼Œæœ€é‡è¦çš„å°±æ˜¯æˆ‘ä»¬è¦æ„å»ºèµ·ç›¸åº”çš„æ‰©å±•æ¨¡å‹ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬è¦é¢å‘æ¥å£ç¼–ç¨‹ã€‚</p><p>è€Œå¤§éƒ¨åˆ†çš„é¢å‘æ¥å£ç¼–ç¨‹è¦ä¾èµ–äºç»§æ‰¿å®ç°ï¼Œè™½ç„¶æˆ‘ä»¬åœ¨å‰é¢çš„è¯¾ç¨‹ä¸­è¯´è¿‡ï¼Œç»§æ‰¿çš„é‡è¦æ€§ä¸å¦‚å°è£…å’Œå¤šæ€ï¼Œä½†åœ¨å¤§éƒ¨åˆ†é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡è¯­è¨€ä¸­ï¼Œç»§æ‰¿å´æ˜¯æ„å»ºä¸€ä¸ªå¯¹è±¡ä½“ç³»çš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚</p><p>ç†è®ºä¸Šï¼Œåœ¨å®šä¹‰äº†æ¥å£ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥æŠŠç»§æ‰¿è¿™ä¸ªæ¥å£çš„ç±»å®Œç¾åœ°åµŒå…¥åˆ°æˆ‘ä»¬è®¾è®¡å¥½çš„ä½“ç³»ä¹‹ä¸­ã€‚ç„¶è€Œï¼Œç”¨äº†ç»§æ‰¿ï¼Œå­ç±»å°±ä¸€å®šè®¾è®¡å¯¹äº†å—ï¼Ÿäº‹æƒ…å¯èƒ½å¹¶æ²¡æœ‰è¿™ä¹ˆç®€å•ã€‚</p><p>æ–°çš„ç±»è™½ç„¶åœ¨è¯­æ³•ä¸Šå£°æ˜äº†ä¸€ä¸ªæ¥å£ï¼Œå½¢æˆäº†ä¸€ä¸ªç»§æ‰¿å…³ç³»ï¼Œä½†æˆ‘ä»¬è¦æƒ³è®©è¿™ä¸ªå­ç±»çœŸæ­£åœ°æ‰®æ¼”èµ·è¿™ä¸ªæ¥å£çš„è§’è‰²ï¼Œè¿˜éœ€è¦æœ‰ä¸€ä¸ªå¥½çš„ç»§æ‰¿æŒ‡å¯¼åŸåˆ™ã€‚</p><p>æ‰€ä»¥ï¼Œè¿™ä¸€è®²ï¼Œæˆ‘ä»¬å°±æ¥çœ‹çœ‹å¯ä»¥æŠŠç»§æ‰¿ä½“ç³»è®¾è®¡å¥½çš„è®¾è®¡åŸåˆ™ï¼šLiskovæ›¿æ¢æ³•åˆ™ã€‚</p><h2>Liskovæ›¿æ¢åŸåˆ™</h2><p>2008å¹´ï¼Œå›¾çµå¥–æˆäºˆBarbara Liskovï¼Œè¡¨å½°å¥¹åœ¨ç¨‹åºè®¾è®¡è¯­è¨€å’Œç³»ç»Ÿè®¾è®¡æ–¹æ³•æ–¹é¢çš„å“è¶Šå·¥ä½œã€‚å¥¹åœ¨è®¾è®¡é¢†åŸŸå½±å“æœ€æ·±è¿œçš„å°±æ˜¯ä»¥å¥¹åå­—å‘½åçš„Liskovæ›¿æ¢åŸåˆ™ï¼ˆLiskov substitution principleï¼Œç®€ç§°LSPï¼‰ã€‚</p><p>1988 å¹´ï¼ŒBarbara Liskovåœ¨æè¿°å¦‚ä½•å®šä¹‰å­ç±»å‹æ—¶å†™ä¸‹è¿™æ ·ä¸€æ®µè¯ï¼š</p><!-- [[[read_end]]] --><blockquote>
<p>è¿™é‡Œéœ€è¦å¦‚ä¸‹æ›¿æ¢æ€§è´¨ï¼šè‹¥æ¯ä¸ªç±»å‹Sçš„å¯¹è±¡o1ï¼Œéƒ½å­˜åœ¨ä¸€ä¸ªç±»å‹Tçš„å¯¹è±¡o2ï¼Œä½¿å¾—åœ¨æ‰€æœ‰é’ˆå¯¹Tç¼–ç¨‹çš„ç¨‹åºPä¸­ï¼Œç”¨o1æ›¿æ¢o2åï¼Œç¨‹åºPè¡Œä¸ºä¿æŒä¸å˜ï¼Œåˆ™Sæ˜¯Tçš„å­ç±»å‹ã€‚</p>
</blockquote><p>ç”¨é€šä¿—çš„è®²æ³•æ¥è¯´ï¼Œæ„æ€å°±æ˜¯ï¼Œå­ç±»å‹ï¼ˆsubtypeï¼‰å¿…é¡»èƒ½å¤Ÿæ›¿æ¢å…¶çˆ¶ç±»å‹ï¼ˆbase typeï¼‰ã€‚</p><p>è¿™å¥è¯çœ‹ä¼¼ç®€å•ï¼Œä½†æ˜¯è¿åè¿™ä¸ªåŸåˆ™ï¼Œåæœæ˜¯å¾ˆä¸¥é‡çš„ï¼Œæ¯”å¦‚ï¼Œçˆ¶ç±»å‹è§„å®šæ¥å£ä¸èƒ½æŠ›å‡ºå¼‚å¸¸ï¼Œè€Œå­ç±»å‹æŠ›å‡ºäº†å¼‚å¸¸ï¼Œå°±ä¼šå¯¼è‡´ç¨‹åºè¿è¡Œçš„å¤±è´¥ã€‚</p><p>è™½ç„¶å¾ˆå¥½ç†è§£ï¼Œä½†ä½ å¯èƒ½ä¼šæœ‰ä¸ªç–‘é—®ï¼Œæˆ‘çš„å­ç±»å‹ä¸éƒ½æ˜¯ç»§æ‰¿è‡ªçˆ¶ç±»å‹ï¼Œå’‹å°±èƒ½è¿åLSPå‘¢ï¼Ÿè¿™ä¸ªLSPæ˜¯ä¸æ˜¯æœ‰ç‚¹å¤šæ­¤ä¸€ä¸¾å‘¢ï¼Ÿ</p><p>æˆ‘ä»¬æ¥çœ‹ä¸ªä¾‹å­ï¼Œæœ‰ä¸å°‘çš„äººç»å¸¸å†™å‡ºç±»ä¼¼ä¸‹é¢è¿™æ ·çš„ä»£ç ï¼š</p><pre><code>void handle(final Handler handler) {
  if (handler instanceof ReportHandler) {
    // ç”ŸæˆæŠ¥å‘Š
    ((ReportHandler)handler).report();
    return;
  }
  
  if (handler instanceof NotificationHandler) {
    // å‘é€é€šçŸ¥
    ((NotificationHandler)handler).sendNotification();
  }
  ...
}
</code></pre><p>æ ¹æ®ä¸Šä¸€è®²çš„å†…å®¹ï¼Œè¿™æ®µä»£ç æ˜¾ç„¶æ˜¯è¿åäº†OCPçš„ã€‚å¦å¤–ï¼Œåœ¨è¿™ä¸ªä¾‹å­é‡Œé¢ï¼Œè™½ç„¶æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªçˆ¶ç±»å‹Handlerï¼Œä½†åœ¨è¿™æ®µä»£ç çš„å¤„ç†ä¸­ï¼Œæ˜¯é€šè¿‡è¿è¡Œæ—¶ç±»å‹è¯†åˆ«ï¼ˆRun-Time Type Identificationï¼Œç®€ç§° RTTIï¼‰ï¼Œä¹Ÿå°±æ˜¯è¿™é‡Œçš„instanceofï¼ŒçŸ¥é“å­ç±»å‹æ˜¯ä»€ä¹ˆçš„ï¼Œç„¶åå»åšç›¸åº”çš„ä¸šåŠ¡å¤„ç†ã€‚</p><p>ä½†æ˜¯ï¼ŒReportHandlerå’ŒNotificationHandlerè™½ç„¶éƒ½æ˜¯Handlerçš„å­ç±»ï¼Œä½†<strong>å®ƒä»¬æ²¡æœ‰ç»Ÿä¸€çš„å¤„ç†æ¥å£</strong>ï¼Œæ‰€ä»¥ï¼Œå®ƒä»¬ä¹‹é—´å¹¶ä¸å­˜åœ¨ä¸€ä¸ªå¯ä»¥æ›¿æ¢çš„å…³ç³»ï¼Œè¿™æ®µä»£ç ä¹Ÿæ˜¯è¿åLSPçš„ã€‚è¿™é‡Œæˆ‘ä»¬å°±å¾—åˆ°äº†ä¸€ä¸ªç»éªŒæ³•åˆ™ï¼Œ<strong>å¦‚æœä½ å‘ç°äº†ä»»ä½•åšè¿è¡Œæ—¶ç±»å‹è¯†åˆ«çš„ä»£ç ï¼Œå¾ˆæœ‰å¯èƒ½å·²ç»ç ´åäº†LSP</strong>ã€‚</p><h2>åŸºäºè¡Œä¸ºçš„IS-A</h2><p>å¦‚æœä½ å»é˜…è¯»å…³äºLSPçš„èµ„æ–™ï¼Œå¾ˆæœ‰å¯èƒ½ä¼šé‡åˆ°ä¸€ä¸ªæœ‰è¶£çš„é—®é¢˜ï¼Œä¹Ÿå°±æ˜¯é•¿æ–¹å½¢æ­£æ–¹å½¢é—®é¢˜ã€‚åœ¨æˆ‘ä»¬å¯¹äºå‡ ä½•é€šå¸¸çš„ç†è§£ä¸­ï¼Œæ­£æ–¹å½¢æ˜¯ä¸€ç§ç‰¹æ®Šçš„é•¿æ–¹å½¢ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šå†™å‡ºè¿™æ ·çš„ä»£ç ï¼š</p><pre><code>class Rectangle {
  private int height;
  private int width;
  
  // è®¾ç½®é•¿åº¦
  public void setHeight(int height) {
    this.height = height;
  }
  
  // è®¾ç½®å®½åº¦
  public void setWidth(int width) {
    this.width = width;
  }
  
  //
  public void area() {
    return this.height * this.width;
  }
}

class Square extends Rectangle {
  // è®¾ç½®è¾¹é•¿
  public void setSide(int side) {
    this.setHeight(side);
    this.setWidth(side);
t
  }
  
  @Override
  public void setHeight(int height) {
    this.setSide(height);
  }

  @Override
  public void setWidth(int width) {
    this.setSide(width);
  }
}
</code></pre><p>è¿™æ®µä»£ç çœ‹ä¸Šå»ä¸€åˆ‡éƒ½å¾ˆå¥½ï¼Œç„¶è€Œï¼Œå®ƒå´æ˜¯æœ‰é—®é¢˜çš„ï¼Œå› ä¸ºå®ƒåœ¨ä¸‹é¢è¿™ä¸ªæµ‹è¯•é‡Œä¼šå¤±è´¥ï¼š</p><pre><code>Rectangle rect = new Square();
rect.setHeight(4); // è®¾ç½®é•¿åº¦
rect.setWidth(5);  // è®¾ç½®å®½åº¦
assertThat(rect.area(), is(20)); // å¯¹ç»“æœè¿›è¡Œæ–­è¨€
</code></pre><p>å¦‚æœæƒ³ä¿è¯æ–­è¨€ï¼ˆassertï¼‰çš„æ­£ç¡®æ€§ï¼ŒRectangleå’ŒSquareäºŒè€…åœ¨è¿™é‡Œæ˜¯ä¸èƒ½äº’ç›¸æ›¿æ¢çš„ã€‚ä½¿ç”¨Rectangleçš„ä»£ç å¿…é¡»çŸ¥é“è‡ªå·±ä½¿ç”¨çš„åˆ°åº•æ˜¯Rectangleè¿˜æ˜¯Squareã€‚</p><p>å‡ºç°è¿™ä¸ªé—®é¢˜çš„åŸå› å°±åœ¨äºï¼Œæˆ‘ä»¬æ„å»ºæ¨¡å‹æ—¶ï¼Œä¼šç†æ‰€å½“ç„¶åœ°æŠŠæˆ‘ä»¬ç›´è§‰ä¸­çš„æ¨¡å‹ç›´æ¥æ˜ å°„åˆ°ä»£ç æ¨¡å‹ä¸Šã€‚åœ¨æˆ‘ä»¬ç›´è§‰ä¸­ï¼Œæ­£æ–¹å½¢ç¡®å®æ˜¯ä¸€ç§é•¿æ–¹å½¢ã€‚</p><p>åœ¨æˆ‘ä»¬è®¾è®¡çš„è¿™ä¸ªå¯¹è±¡ä½“ç³»ä¸­ï¼Œè¾¹é•¿æ˜¯å¯ä»¥è°ƒæ•´çš„ã€‚ç„¶è€Œï¼Œåœ¨å‡ ä½•çš„ä½“ç³»é‡Œé¢ï¼Œé•¿æ–¹å½¢çš„è¾¹é•¿æ˜¯ä¸èƒ½éšæ„æ”¹å˜çš„ï¼Œè®¾ç½®å¥½äº†å°±æ˜¯è®¾ç½®å¥½äº†ã€‚æ¢å¥è¯è¯´ï¼Œä¸¤ä¸ªä½“ç³»å†…ï¼Œâ€œé•¿æ–¹å½¢â€çš„è¡Œä¸ºæ˜¯ä¸ä¸€è‡´çš„ã€‚æ‰€ä»¥ï¼Œåœ¨è¿™ä¸ªå¯¹è±¡ä½“ç³»ä¸­ï¼Œæ­£æ–¹å½¢è¾¹é•¿å³ä½¿å¯ä»¥è°ƒæ•´ï¼Œä½†æ­£æ–¹å½¢ä¹Ÿå¹¶ä¸æ˜¯ä¸€ä¸ªé•¿æ–¹å½¢ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒä»¬ä¹‹é—´ä¸æ»¡è¶³IS-Aå…³ç³»ã€‚</p><p>ä½ å¯èƒ½å¬è¯´è¿‡ç»§æ‰¿è¦ç¬¦åˆIS-Açš„å…³ç³»ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œ<strong>å¦‚æœAæ˜¯Bçš„å­ç±»ï¼Œå°±éœ€è¦æ»¡è¶³Aæ˜¯ä¸€ä¸ªBï¼ˆA is a Bï¼‰</strong>ã€‚ä½†ä½ æœ‰æ²¡æœ‰æƒ³è¿‡ï¼Œå‡­ä»€ä¹ˆAæ˜¯ä¸€ä¸ªBå‘¢ï¼Ÿåˆ¤æ–­ä¾æ®ä»ä½•è€Œæ¥å‘¢ï¼Ÿ</p><p>ä½ åº”è¯¥çŸ¥é“ï¼Œè¿™ç§åˆ¤å®šæ˜¾ç„¶ä¸èƒ½ä¾é ç›´è§‰ã€‚å…¶å®ï¼Œä»å‰é¢çš„åˆ†æä¸­ï¼Œä½ ä¹Ÿèƒ½çœ‹å‡ºä¸€äº›ç«¯å€ªæ¥ï¼Œ<strong>IS-Açš„åˆ¤å®šæ˜¯åŸºäºè¡Œä¸ºçš„</strong>ï¼Œåªæœ‰è¡Œä¸ºç›¸åŒï¼Œæ‰èƒ½è¯´æ˜¯æ»¡è¶³IS-Açš„å…³ç³»ã€‚</p><p>è¿™ä¸ªé“ç†è¯´èµ·æ¥å¾ˆç®€å•ï¼Œä½†åœ¨å®é™…çš„å·¥ä½œä¸­ï¼Œæˆ‘ä»¬æ—¶å¸¸å°±ä¼šèµ°ä¸Šæ­§é€”ã€‚æˆ‘ç»™ä½ ä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘è¦åšä¸€ä¸ªå›¾ç‰‡åˆ¶ä½œçš„ç½‘ç«™ï¼Œåˆ›ä½œè€…å¯ä»¥åœ¨ä¸Šé¢åˆ›ä½œè‡ªå·±çš„å†…å®¹ï¼Œè¿˜å¯ä»¥å‘å¸ƒè‡ªå·±åˆ›ä½œçš„ä¸€äº›ç´ æåœ¨ç½‘ç«™ä¸Šé”€å”®ã€‚æ˜¾ç„¶ï¼Œè¿™ä¸ªç½‘ç«™è¦æä¾›ä¸€ä¸ªé”€å”®çš„èƒ½åŠ›ï¼Œé‚£è¿™ä¸ªå¯ä»¥é”€å”®çš„ç´ æç®—ä¸ç®—å•†å“å‘¢ï¼Ÿ</p><p>å¦‚æœç«™åœ¨é”€å”®çš„è§’åº¦çœ‹ï¼Œå®ƒç¡®å®æ˜¯ä¸€ä¸ªå•†å“ï¼Œæˆ‘ä»¬éœ€è¦ç»™å®ƒå®šä»·ï¼Œéœ€è¦è®©å®ƒæ”¯æŒåç»­çš„è´­ä¹°è¡Œä¸ºç­‰ç­‰ã€‚ä»è¡Œä¸ºä¸Šçœ‹ï¼Œç´ æä¹Ÿç¡®å®æ˜¯å•†å“ï¼Œä½†å®ƒåˆä¸åˆ›ä½œç›¸å…³ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“å®ƒçš„ä½œè€…æ˜¯è°ï¼Œéœ€è¦çŸ¥é“å®ƒæ‰€åº”ç”¨çš„ä¸åŒåˆ›ä½œé˜¶æ®µç­‰ç­‰ï¼Œè¿™äº›è¡Œä¸ºåˆä¸å•†å“å®Œå…¨æ— å…³ã€‚</p><p>å…¶å®ï¼Œåœ¨æˆ‘ä»¬åˆ†æé—®é¢˜çš„æ—¶å€™ï¼Œç­”æ¡ˆå°±å·²ç»å‘¼ä¹‹æ¬²å‡ºäº†ã€‚è¿™é‡Œçš„â€œç´ æâ€å°±ä¸æ˜¯ä¸€ä¸ªâ€œç´ æâ€ï¼Œå‰é¢è®²SRPçš„æ—¶å€™ï¼Œæˆ‘ä»¬å·²ç»åšè¿‡ç±»ä¼¼çš„åˆ†æäº†ï¼Œè™½ç„¶æˆ‘ä»¬åœ¨è®¨è®ºçš„æ—¶å€™ï¼Œç”¨çš„æ˜¯ä¸€ä¸ªè¯â€œç´ æâ€ï¼Œä½†åˆ›ä½œè€…å’Œé”€å”®å´æ˜¯ä¸¤ä¸ªä¸åŒçš„é¢†åŸŸã€‚</p><p>æ‰€ä»¥ï¼Œå¦‚æœæˆ‘ä»¬æŠŠâ€œç´ æâ€åšä¸€ä¸ªæ‹†åˆ†ï¼Œè¿™ä¸ªé—®é¢˜å°±è¿åˆƒè€Œè§£äº†ã€‚ä¸€ä¸ªæ˜¯â€œåˆ›ä½œè€…ç´ æâ€ï¼Œä¸€ä¸ªæ˜¯â€œå¯é”€å”®ç´ æâ€ï¼Œæ˜¾ç„¶ï¼Œâ€œå¯é”€å”®ç´ æâ€æ˜¯ä¸€ç§å•†å“ï¼Œè€Œâ€œåˆ›ä½œè€…ç´ æâ€ä¸æ˜¯ã€‚</p><p>è¿™æ˜¯ä¸€ç§å¸¸è§çš„æ¦‚å¿µæ··æ·†ã€‚äº§å“ç»ç†åœ¨æè¿°ä¸€ä¸ªéœ€æ±‚æ—¶ï¼Œå¯èƒ½å¹¶ä¸ä¼šæ³¨æ„åˆ°è¿™æ˜¯ä¸¤ä¸ªä¸åŒé¢†åŸŸçš„æ¦‚å¿µï¼Œè€Œç¨‹åºå‘˜å¦‚æœä¸å¥½å¥½åˆ†æä¸€ä¸‹ï¼Œåœ¨æ¦‚å¿µä¸Šå°±ä¼šèµ°åï¼Œåç»­çš„é—®é¢˜å°†æ— ç©·æ— å°½ã€‚</p><p>æ‰€ä»¥ï¼ŒIS-Aè¿™ä¸ªå…³ç³»ç†è§£èµ·æ¥å¹¶ä¸éš¾ï¼Œä½†åœ¨å®é™…å·¥ä½œä¸­ï¼Œå½“å®ƒå’Œå…¶ä»–ä¸€äº›é—®é¢˜æ··åœ¨ä¸€èµ·çš„æ—¶å€™ï¼Œå®ƒå°±ä¸åƒçœ‹èµ·æ¥é‚£ä¹ˆç®€å•äº†ã€‚</p><p>åˆ°è¿™é‡Œï¼Œä½ åº”è¯¥å¯¹LSPåŸåˆ™æœ‰äº†ä¸€äº›ç†è§£ï¼Œ<strong>è¦æ»¡è¶³LSPï¼Œé¦–å…ˆè¿™ä¸ªå¯¹è±¡ä½“ç³»è¦æœ‰ä¸€ä¸ªç»Ÿä¸€çš„æ¥å£ï¼Œè€Œä¸èƒ½å„è¡Œå…¶æ˜¯ï¼Œå…¶æ¬¡ï¼Œå­ç±»è¦æ»¡è¶³IS-Açš„å…³ç³»</strong>ã€‚</p><p>æœ‰äº†å¯¹LSPçš„ç†è§£ï¼Œä½ å†ç”¨å®ƒå»è¡¡é‡ä¸€äº›è®¾è®¡ï¼Œå°±ä¼šå‘ç°ä¸€äº›é—®é¢˜ã€‚æ¯”å¦‚ï¼Œç¨‹åºå‘˜ä»¬æœ€å¸¸ç”¨çš„æ•°æ®ç»“æ„Listï¼Œå¾ˆå¤šäººéƒ½ä¹ æƒ¯åœ°æŠŠå®ƒå½“åšæ¥å£ä¼ æ¥ä¼ å»ã€‚åœ¨ç»å¤§å¤šæ•°åœºæ™¯ä¸‹ï¼Œä½¿ç”¨å®ƒçš„ç›®çš„åªæ˜¯ä¸ºäº†ä¼ é€’ä¸€äº›æ•°æ®ï¼Œä¹Ÿå°±æ˜¯ä¸ºäº†ä»ä¸­è¯»å–æ•°æ®ï¼Œä½†Listæ¥å£æœ¬èº«ä¸€èˆ¬éƒ½æœ‰å†™çš„æ–¹æ³•ã€‚</p><p>æ‰€ä»¥ï¼Œå°½ç®¡ä½ çš„ç›®çš„æ˜¯è¯»ï¼Œä½†è¿˜æ˜¯æœ‰äººä¸å°å¿ƒå†™äº†ï¼Œå°±ä¼šå¯¼è‡´ä¸€äº›å¥‡æ€ªçš„é—®é¢˜ã€‚Googleçš„Guavaåº“æä¾›äº†ä¸€ä¸ªImmutableListï¼Œåœ¨æ¦‚å¿µä¸Šåšäº†æ”¹è¿›ã€‚ä½†ä¸ºäº†é…åˆç°æœ‰çš„å„ç§ç¨‹åºï¼Œå®ƒä¸å¾—ä¸ç»§æ‰¿è‡ªListæ¥å£ï¼Œå®é™…ä¸Šï¼Œæ ¹æœ¬çš„é—®é¢˜å¹¶æ²¡æœ‰å¾—åˆ°å®Œå…¨çš„è§£å†³ã€‚</p><p>è¿˜æœ‰ä¸€ç±»å¸¸è§çš„è¿åLSPçš„é—®é¢˜ï¼Œå°±æ˜¯ç»§æ‰¿æ•°æ®ç»“æ„ã€‚æ¯”å¦‚ï¼Œæˆ‘è¦å®ç°åŒ…å«å¤šä¸ªå­¦ç”Ÿçš„ç±»ï¼Œç»“æœå£°æ˜æˆï¼š</p><pre><code>class Students extends ArrayList&lt;Student&gt; {
  ...
}
</code></pre><p>è¿™æ˜¯ä¸€ç§éå¸¸ç›´è§‰çš„è®¾è®¡ï¼Œåªè¦ä¸€ç»§æ‰¿ArrayListï¼Œæ·»åŠ ã€è·å–çš„æ–¹æ³•å°±éƒ½æœ‰äº†ã€‚ä½†ä»æˆ‘ä»¬å‰é¢è®²çš„å†…å®¹ä¸Šæ¥çœ‹ï¼Œè¿™æ˜¾ç„¶æ˜¯ä¸å¥½çš„ï¼Œå› ä¸ºStudentsä¸æ˜¯ä¸€ä¸ªArrayListï¼Œä¸èƒ½æ»¡è¶³IS-Aå…³ç³»ã€‚è¿™ç§åšæ³•æƒ³åšçš„å°±æ˜¯å®ç°ç»§æ‰¿ï¼Œè€Œæˆ‘ä»¬åœ¨å‰é¢è®²ç»§æ‰¿çš„æ—¶å€™ï¼Œå°±è¯´è¿‡è¿™ç§åšæ³•çš„é—®é¢˜ã€‚</p><p>ä½ ä¼šå‘ç°ï¼ŒLSPçš„å…³æ³¨ç‚¹è®©äººæŠŠæ³¨æ„åŠ›æ”¾åˆ°çˆ¶ç±»ä¸Šï¼Œè€Œä¸€æ—¦å­ç±»æˆäº†é‡ç‚¹ï¼Œæˆ‘ä»¬å¿…é¡»å°å¿ƒè°¨æ…ã€‚åœ¨å‰é¢è®²ç»§æ‰¿çš„æ—¶å€™ï¼Œæˆ‘ä»¬è¯´è¿‡ï¼Œå…³å¿ƒå­ç±»æ˜¯ä¸€ç§å®ç°ç»§æ‰¿çš„è¡¨ç°ï¼Œè€Œå®ç°ç»§æ‰¿æ˜¯æˆ‘ä»¬è¦åŠªåŠ›æ‘’å¼ƒçš„ï¼Œæ¥å£ç»§æ‰¿æ‰æ˜¯æˆ‘ä»¬çš„åŠªåŠ›æ–¹å‘ï¼Œè€Œåšå¥½æ¥å£ç»§æ‰¿ï¼Œæ˜¾ç„¶ä¼šæ›´ç¬¦åˆLSPã€‚</p><h2>æ›´å¹¿æ³›çš„LSP</h2><p>å¦‚æœç†è§£äº†LSPï¼Œä½ ä¼šå‘ç°ï¼Œå®ƒä¸ä»…é€‚ç”¨äºç±»çº§åˆ«çš„è®¾è®¡ï¼Œè¿˜é€‚ç”¨äºæ›´å¹¿æ³›çš„æ¥å£è®¾è®¡ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬åœ¨å¼€å‘ä¸­ç»å¸¸ä¼šé‡åˆ°ç³»ç»Ÿé›†æˆçš„é—®é¢˜ï¼Œã€‚æœ‰ä¸åŒçš„å‚å•†éƒ½è¦é€šè¿‡RESTæ¥å£æŠŠä»–ä»¬çš„ç»Ÿè®¡ä¿¡æ¯ä¸ŠæŠ¥åˆ°ä½ çš„ç³»ç»Ÿä¸­ï¼Œä½†æ˜¯ï¼Œæœ‰ä¸€ä¸ªå¤§å‚ä¸ŠæŠ¥çš„æ¶ˆæ¯æ ¼å¼æ²¡æ³•éµå¾ªä½ å®šä¹‰çš„æ ¼å¼ï¼Œå› ä¸ºä»–çš„ç³»ç»Ÿæ”¹åŠ¨èµ·æ¥éš¾åº¦æ¯”è¾ƒå¤§ã€‚ä½ è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ</p><p>ä¹Ÿè®¸ï¼Œä¸“é—¨ä¸ºå¤§å‚è®¾è®¡ä¸€ä¸ªç‰¹å®šæ¥å£æ˜¯æœ€ç®€å•çš„æƒ³æ³•ï¼Œä½†æ˜¯ï¼Œä¸€æ—¦å¼€äº†è¿™ä¸ªå£å­ï¼Œåé¢çš„å„ç§é›†æˆæ¥å£éƒ½è¦ä¸ºè¿™ä¸ªå¤§å‚å¼€å‘ä¸€ä»½ç‰¹æ®Šçš„ï¼Œè€Œä¸”ï¼Œå¦‚æœæœªæ¥å†æœ‰å…¶ä»–å¤§å‚ä¹Ÿæå‡ºè¦æ±‚ï¼Œä½ è¦ä¸è¦ä¸ºå®ƒä»¬ä¹Ÿè®¾è®¡ç‰¹æ®Šæ¥å£å‘¢ï¼Ÿäº‹å®ä¸Šï¼Œå¾ˆå¤šé¡¹ç›®åŠŸèƒ½ä¸å¤šï¼Œä½†æ¥å£ç‰¹åˆ«å¤šï¼Œå°±æ˜¯å› ä¸ºåœ¨è¿™ç§å†³ç­–çš„æ—¶å€™å¼€äº†å£å­ã€‚<strong>è¯·è®°ä½ï¼Œå…¬å¼€æ¥å£æ˜¯æœ€å®è´µçš„èµ„æºï¼Œåƒä¸‡ä¸èƒ½éšæ„æ·»åŠ </strong>ã€‚</p><p>å¦‚æœæˆ‘ä»¬ç”¨LSPçš„è§’åº¦çœ‹è¿™ä¸ªé—®é¢˜ï¼Œé€šç”¨æ¥å£å°±æ˜¯ä¸€ä¸ªçˆ¶ç±»æ¥å£ï¼Œè€Œä¸åŒå‚å•†çš„å†…å®¹å°±ç›¸å½“äºä¸€ä¸ªä¸ªå­ç±»ã€‚è®©å‚å•†é¢å¯¹ç‰¹å®šæ¥å£ï¼Œç³»ç»Ÿå°†å˜å¾—æ— æ³•ç»´æŠ¤ã€‚åæœŸéšç€äººå‘˜å˜åŠ¨ï¼Œæ¥å£åªä¼šæ›´åŠ è†¨èƒ€ï¼Œåˆ°æœ€åï¼Œæ²¡æœ‰äººè¯´æ¸…æ¥šæ¯ä¸ªæ¥å£åˆ°åº•æ˜¯åšä»€ä¹ˆçš„ã€‚</p><p>å¥½ï¼Œé‚£æˆ‘ä»¬å†³å®šé‡‡ç”¨ç»Ÿä¸€çš„æ¥å£ï¼Œå¯æ˜¯ä¸åŒçš„æ¶ˆæ¯æ ¼å¼è¯¥æ€ä¹ˆå¤„ç†å‘¢ï¼Ÿé¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åŒºåˆ†å‡ºä¸åŒçš„å‚å•†ï¼ŒåŠæ³•æœ‰å¾ˆå¤šï¼Œæ— è®ºæ˜¯é€šè¿‡RESTçš„è·¯å¾„ï¼Œè¿˜æ˜¯HTTPå¤´çš„æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°ä¸€ä¸ªæ ‡è¯†ç¬¦ã€‚ç„¶åå‘¢ï¼Ÿ</p><p>å¾ˆå®¹æ˜“æƒ³åˆ°çš„åšæ³•å°±æ˜¯å†™å‡ºä¸€ä¸ªifè¯­å¥æ¥ï¼Œåƒä¸‹é¢è¿™æ ·ï¼š</p><pre><code>if (identfier.equals(&quot;SUPER_VENDOR&quot;)) {
  ...
}
</code></pre><p>ä½†æ˜¯ï¼Œåƒä¸‡è¦éåˆ¶è‡ªå·±å†™ifçš„å¿µå¤´ï¼Œä¸€æ—¦å¼€äº†è¿™ä¸ªå¤´ï¼Œåç»­çš„ä»£ç ä¹Ÿå°†å˜å¾—éš¾ä»¥ç»´æŠ¤ã€‚æˆ‘ä»¬å¯ä»¥åšçš„æ˜¯ï¼Œæä¾›ä¸€ä¸ªè§£æå™¨çš„æ¥å£ï¼Œæ ¹æ®æ ‡è¯†ç¬¦æ‰¾åˆ°ä¸€ä¸ªå¯¹åº”çš„è§£æå™¨ï¼Œåƒä¸‹é¢è¿™æ ·ï¼š</p><pre><code>RequestParser parser = parsers.get(identifier);
if (parser != null) {
  return parser.parse(request);
}
</code></pre><p>è¿™æ ·ä¸€æ¥ï¼Œå³ä¾¿æœ‰å…¶ä»–å‚å•†å†å› ä¸ºæŸäº›å¥‡æ€ªçš„åŸå› è¦æ±‚æœ‰ç‰¹å®šçš„æ ¼å¼ï¼Œæˆ‘ä»¬è¦åšçš„åªæ˜¯æä¾›ä¸€ä¸ªæ–°çš„æ¥å£å®ç°ã€‚è¿™æ ·ä¸€æ¥ï¼Œæ‰€æœ‰ä»£ç çš„è¡Œä¸ºå°±ä¿æŒäº†ä¸€è‡´æ€§ï¼Œæ ¸å¿ƒçš„ä»£ç ç»“æ„ä¹Ÿä¿æŒäº†ç¨³å®šã€‚</p><p><strong>æ€»ç»“æ—¶åˆ»</strong></p><p>ä»Šå¤©ï¼Œæˆ‘ä»¬è®²äº†Liskovæ›¿æ¢åŸåˆ™ï¼Œå…¶ä¸»è¦æ„æ€æ˜¯è¯´å­ç±»å‹å¿…é¡»èƒ½å¤Ÿæ›¿æ¢å…¶çˆ¶ç±»å‹ã€‚</p><p>ç†è§£LSPï¼Œæˆ‘ä»¬éœ€è¦ç«™åœ¨çˆ¶ç±»çš„è§’åº¦å»çœ‹ï¼Œè€Œç«™åœ¨å­ç±»çš„è§’åº¦ï¼Œå¸¸å¸¸æ˜¯ç ´åLSPçš„åšæ³•ï¼Œä¸€ä¸ªå€¼å¾—è­¦æƒ•çš„ç°è±¡æ˜¯ï¼Œä»£ç ä¸­å‡ºç°RTTIç›¸å…³çš„ä»£ç ã€‚</p><p>ç»§æ‰¿éœ€è¦æ»¡è¶³IS-Açš„å…³ç³»ï¼Œä½†IS-Açš„å…³é”®åœ¨äºè¡Œä¸ºä¸Šçš„ä¸€è‡´æ€§ï¼Œè€Œä¸èƒ½å•çº¯å‡­æ—¥å¸¸çš„æ¦‚å¿µæˆ–ç›´è§‰å»ç†è§£ã€‚</p><p>LSPä¸ä»…ä»…å¯ä»¥ç”¨åœ¨ç±»å…³ç³»çš„è®¾è®¡ä¸Šï¼Œæˆ‘ä»¬è¿˜å¯ä»¥æŠŠå®ƒç”¨åœ¨æ›´å¹¿æ³›çš„æ¥å£è®¾è®¡ä¸­ã€‚ä»»ä½•æ¥å£éƒ½æ˜¯å®è´µçš„ï¼Œåœ¨è®¾è®¡æ—¶ï¼Œéƒ½è¦ç²¾å¿ƒè€ƒé‡ã€‚</p><p>è¿™ä¸€è®²ï¼Œä½ å¯ä»¥çœ‹åˆ°LSPçš„æ ¹åŸºåœ¨äºç»§æ‰¿ï¼Œä½†æ˜¾ç„¶æ¥å£ç»§æ‰¿æ‰æ˜¯é‡ç‚¹ã€‚é‚£æˆ‘ä»¬è¯¥å¦‚ä½•è®¾è®¡æ¥å£å‘¢ï¼Ÿæˆ‘ä»¬ä¸‹ä¸€è®²æ¥è®¨è®ºã€‚</p><p>å¦‚æœä»Šå¤©çš„å†…å®¹ä½ åªèƒ½è®°ä½ä¸€ä»¶äº‹ï¼Œé‚£è¯·è®°ä½ï¼š<strong>ç”¨çˆ¶ç±»çš„è§’åº¦å»æ€è€ƒï¼Œè®¾è®¡è¡Œä¸ºä¸€è‡´çš„å­ç±»</strong>ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/bc/00/bcfbb2358f37ae40383fe89bccedb400.jpg" alt=""></p><h2>æ€è€ƒé¢˜</h2><p>åœ¨ä»Šå¤©çš„å†…å®¹ä¸­ï¼Œæˆ‘ä»¬æåˆ°äº†é•¿æ–¹å½¢æ­£æ–¹å½¢é—®é¢˜ï¼Œæˆ‘åªåˆ†æäº†è¿™ä¸ªåšæ³•æœ‰é—®é¢˜çš„åœ°æ–¹ï¼Œç°åœ¨æˆ‘æŠŠè§£å†³è¿™ä¸ªé—®é¢˜çš„æœºä¼šç•™ç»™ä½ ï¼Œè¯·ä½ æ¥åŠ¨åŠ¨è„‘ï¼Œæ¬¢è¿åœ¨ç•™è¨€åŒºå†™ä¸‹ä½ çš„è§£å†³æ–¹æ¡ˆã€‚</p><p>æ„Ÿè°¢é˜…è¯»ï¼Œå¦‚æœä½ è§‰å¾—è¿™ä¸€è®²çš„å†…å®¹å¯¹ä½ æœ‰å¸®åŠ©çš„è¯ï¼Œä¹Ÿæ¬¢è¿æŠŠå®ƒåˆ†äº«ç»™ä½ çš„æœ‹å‹ã€‚</p><h2>ç²¾é€‰ç•™è¨€ï¼š</h2>
        <ul>
        
<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;            line-height:1.2">
            èµµå†²  2020-07-17 07:58:37
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;            word-break:break-all;line-height:1.6">
            é‚£ä»çˆ¶ç±»çš„è§’åº¦æ¥è€ƒè™‘çš„è¯ï¼Œåº”è¯¥æ˜¯å®šä¹‰ä¸€ä¸ªå‡ ä½•å›¾å½¢çš„æ¥å£ï¼Œæ¥å£æœ‰è®¡ç®—é¢ç§¯çš„æ–¹æ³•ã€‚ç„¶åé•¿æ–¹å½¢ã€æ­£æ–¹å½¢ã€åœ†å½¢ã€ä¸‰è§’å½¢â€¦â€¦éƒ½å®ç°è¿™ä¸ªæ¥å£ï¼Œç„¶åå„è‡ªå®ç°è®¡ç®—é¢ç§¯çš„æ–¹æ³•ã€‚å„è‡ªæœ‰è‡ªå·±ç‰¹åˆ«çš„å…³é”®å±æ€§ï¼Œæ ¹æ®å±æ€§è®¡ç®—å„è‡ªé¢ç§¯:é•¿*å®½ã€è¾¹é•¿Â²ã€Ï€rÂ²ã€(åº•é•¿*é«˜)&#47;2ã€â€¦â€¦ [5èµ]
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;        line-height:1.2">ä½œè€…å›å¤2020-07-19 07:54:28</div>
    <div style="color:#353535;font-weight:400;white-space:normal;        word-break:break-all;line-height:1.6">å—¯ï¼Œè¿™ä¸ªè§£å†³æ–¹æ¡ˆçš„å‘³é“ä¸é”™ã€‚</div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;            line-height:1.2">
            Being  2020-07-18 08:02:33
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;            word-break:break-all;line-height:1.6">
            å…¨ç¯‡ä¸€ç›´åœ¨å¼ºè°ƒè¡Œä¸ºï¼Œæˆ‘æƒ³è¿™ä¹Ÿæ˜¯æ€è€ƒé¢˜çš„çªç ´å£ã€‚é•¿å®½æ˜¯æ•°æ®ï¼Œè€ŒRectangleå¹¶æ²¡æœ‰å°†è¡Œä¸ºæŠ½è±¡å‡ºæ¥ï¼Œå¯¼è‡´Rectangleå’ŒSquareä¸èƒ½æˆä¸ºIS-Açš„å…³ç³»ï¼Œæˆ‘ä»¬åªè¦æŠŠæ±‚é¢ç§¯çš„è¡Œä¸ºæ”¾åœ¨Rectangleä¸‹ï¼Œå­ç±»åˆ†åˆ«å»å®ç°é¢ç§¯çš„æ–¹æ³•å°±å¥½äº†ã€‚ [2èµ]
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;        line-height:1.2">ä½œè€…å›å¤2020-07-19 07:50:38</div>
    <div style="color:#353535;font-weight:400;white-space:normal;        word-break:break-all;line-height:1.6">â€œæŠŠæ±‚é¢ç§¯çš„è¡Œä¸ºæ”¾åœ¨Rectangleä¸‹ï¼Œå­ç±»åˆ†åˆ«å»å®ç°é¢ç§¯çš„æ–¹æ³•â€ï¼Œå¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜å—ï¼Ÿ</div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;            line-height:1.2">
            ä¸‰ç”Ÿ  2020-07-22 00:43:07
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;            word-break:break-all;line-height:1.6">
            æ‰€æœ‰çš„å½¢çŠ¶éƒ½æœ‰æ±‚é¢ç§¯çš„æ–¹å¼ï¼Œä½†æ˜¯è®¡ç®—æ–¹å¼éƒ½ä¸åŒï¼Œè¿™è¡Œä¸ºåº”è¯¥æ˜¯â€œæ­£å¸¸çš„â€ï¼Œä½†æ˜¯è®¾ç½®é•¿å’Œå®½çš„è¡Œä¸ºä¸æ­£ç¡®ï¼Œå› ä¸ºé•¿æ–¹ä½“æœ‰å®½å’Œé«˜ï¼Œæ­£æ–¹å½¢åªæœ‰å®½æˆ–é«˜ï¼Œè¿™é‡Œåªèƒ½æŠ½è±¡å‡ºè®¡ç®—é¢ç§¯è¿™ä¸ªæ–¹æ³•ã€‚<br><br>æ¯”å¦‚ä¼é¹…å’Œéº»é›€ï¼Œæˆ‘ä»¬è®¤ä¸ºæ‰€æœ‰çš„é¸Ÿéƒ½ä¼šé£ï¼Œä½†ä¼é¹…ä¸ä¼šé£ï¼Œè€Œä»–å´å…·æœ‰äº†é£çš„è¡Œä¸ºï¼Œè¿™æ˜¯â€œä¸æ­£å¸¸â€çš„ 
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;            line-height:1.2">
            Demon.Lee  2020-07-21 10:03:45
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;            word-break:break-all;line-height:1.6">
            æ€è€ƒé¢˜ï¼Œæƒ³äº†å¥½å‡ å¤©ï¼Œæ€»è§‰å¾—æ²¡é‚£ä¹ˆç®€å•ï¼Œå®šä¹‰ä¸€ä¸ªShapeæ¥å£ï¼ˆé‡Œé¢ä¸€ä¸ªè®¡ç®—é¢ç§¯çš„areaæ–¹æ³•ï¼‰å°±å®Œäº†å—ï¼Ÿ é‚£è€å¸ˆä¾‹å­é‡Œé¢çš„setæ–¹æ³•æ”¹å˜å±æ€§å€¼æ€ä¹ˆç ´ï¼Œæˆ‘åå¤åˆ·ç•™è¨€ï¼Œè¿˜æ˜¯æ²¡æœ‰æˆ‘æƒ³è¦ç­”æ¡ˆï¼Œåªèƒ½Googleäº†ï¼Œç„¶åæˆ‘å°±é‡Šæ€€äº†ğŸ¤£ï¼šhttp:&#47;&#47;stg-tud.github.io&#47;sedc&#47;Lecture&#47;ws13-14&#47;3.3-LSP.html#mode=document 
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;            line-height:1.2">
            å¼ çˆæ¯“  2020-07-20 23:38:08
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;            word-break:break-all;line-height:1.6">
            åœ¨æ­£æ–¹å½¢ç±»ä¸­é‡å†™é•¿æ–¹å½¢çš„è®¡ç®—é¢ç§¯æ¥å£ 
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;        line-height:1.2">ä½œè€…å›å¤2020-07-21 09:28:50</div>
    <div style="color:#353535;font-weight:400;white-space:normal;        word-break:break-all;line-height:1.6">ä½†æµ‹è¯•ä¾ç„¶æ— æ³•é€šè¿‡ã€‚</div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;            line-height:1.2">
            monalisali  2020-07-20 17:52:32
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;            word-break:break-all;line-height:1.6">
            RequestParser ä¸­è¿˜æ˜¯å…ä¸äº†ç”¨å¤šä¸ª if æ¥åˆ¤æ–­ identifierï¼Œä»è€Œè¿”å›ç‰¹å®šçš„å­ç±»å§ 
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;        line-height:1.2">ä½œè€…å›å¤2020-07-20 20:57:15</div>
    <div style="color:#353535;font-weight:400;white-space:normal;        word-break:break-all;line-height:1.6">ä¸ä¸€å®šï¼Œå¯ä»¥é€šè¿‡ä¸€ä¸ªMapå®ç°ã€‚</div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;            line-height:1.2">
            zchq88  2020-07-20 14:41:49
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;            word-break:break-all;line-height:1.6">
            æ˜¯ä¸æ˜¯å¯ä»¥å§Squareåšçˆ¶ç±»ï¼Œç„¶åRectangleä½œä¸ºå­ç±»æ¥è®¾è®¡ï¼Œçˆ¶ç±»åªæœ‰ä¸€ä¸ªè®¾ç½®è¾¹é•¿ï¼Œå­ç±»å¢åŠ è®¾ç½®é•¿å®½çš„æ¥å£ï¼Œå¦‚æœæ²¡æœ‰è®¾ç½®é•¿å®½é»˜è®¤ä½¿ç”¨è¾¹é•¿çš„å€¼ã€‚è¿™æ ·æ˜¯ä¸æ˜¯ç¬¦åˆæ›¿æ¢åŸåˆ™ï¼Ÿ 
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;            line-height:1.2">
            Jxin  2020-07-17 10:22:03
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;            word-break:break-all;line-height:1.6">
            å¦‚æœä¸šåŠ¡åœºæ™¯åˆé€‚ï¼Œçº¦æŸåŠŸèƒ½ä¹Ÿä¸å¤±ä¸ºä¸€ä¸ªè§£å†³åŠæ³•ã€‚è®©å®½é«˜ä¸å¯å˜ï¼Œåˆå§‹åŒ–æ—¶å°±å¿…é¡»èµ‹å€¼ã€‚è¿™æ ·å°±èƒ½ç¬¦åˆç°å®ä¸­çš„ç‰¹æ€§ã€‚è‡ªç„¶ä¹Ÿæ²¡æœ‰é•¿å®½èµ‹ä¸åŒå€¼çš„éº»çƒ¦ã€‚ 
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;        line-height:1.2">ä½œè€…å›å¤2020-07-19 07:53:31</div>
    <div style="color:#353535;font-weight:400;white-space:normal;        word-break:break-all;line-height:1.6">setter ç¡®å®æ˜¯ä¸€ä¸ªæœ‰æ€ä¼¤åŠ›çš„ä¸œè¥¿ï¼Œä½†å›é¿ setterå¹¶ä¸æ˜¯åœ¨è§£å†³æˆ‘ä»¬æå‡ºçš„é—®é¢˜ã€‚</div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;            line-height:1.2">
            é˜³ä»”  2020-07-17 09:10:57
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;            word-break:break-all;line-height:1.6">
            Liskovæ›¿æ¢çš„æ„æ€æ˜¯å­ç±»å‹èƒ½å¤Ÿæ›¿æ¢çˆ¶ç±»å‹ï¼Œä¸”åœ¨ç»§æ‰¿ä½“ç³»ä¸­ä¿æŒæ¥å£çš„ä¸€è‡´<br>é•¿æ–¹å½¢ä¸æ­£æ–¹å½¢è®¡ç®—é¢ç§¯çš„è¡Œä¸ºæ¥å£æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯å®šä¹‰é•¿æ–¹å½¢å’Œæ­£æ–¹å½¢çš„æ¥å£æ˜¯ä¸ä¸€æ ·çš„ï¼Œæ‰€ä»¥è¿™ä¸¤ä¸ªè¡Œä¸ºå¯ä»¥åˆ†åˆ«æŠ½ç¦»å‡ºæ¥ 
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;        line-height:1.2">ä½œè€…å›å¤2020-07-19 07:54:05</div>
    <div style="color:#353535;font-weight:400;white-space:normal;        word-break:break-all;line-height:1.6">é•¿æ–¹å½¢å’Œæ­£æ–¹å½¢æ¥å£ä¸ä¸€æ ·ï¼Œè¿™æ˜¯ä¸€ä¸ªç‚¹ã€‚</div>
</div>
            
    </div>
</li>
            </ul>
</div>
</body>
</html>